resource_registry:
  # Specify the relative/absolute path to the config files you want to use for
  # override the default.
  
  #OS::TripleO::ComputeOvsDpdk::Net::SoftwareConfig: /home/stack/templates/computehybrid.yaml
  #OS::TripleO::ComputeSriov::Net::SoftwareConfig: /home/stack/templates/computesriov.yaml
  OS::TripleO::ComputeSriov::Net::SoftwareConfig: /home/stack/templates/computehybrid.yaml
  OS::TripleO::Controller::Net::SoftwareConfig: /home/stack/templates/controller.yaml

  #Opendaylight related Configs
  #OS::TripleO::Services::NeutronSriovAgent: /usr/share/openstack-tripleo-heat-templates/docker/services/neutron-sriov-agent.yaml
  #OS::TripleO::Services::NeutronOvsAgent: OS::Heat::None
  #OS::TripleO::Services::ComputeNeutronOvsAgent: OS::Heat::None
  #OS::TripleO::Services::ComputeNeutronCorePlugin: OS::Heat::None
  #OS::TripleO::Services::OpenDaylightApi: /usr/share/openstack-tripleo-heat-templates/docker/services/opendaylight-api.yaml
  #OS::TripleO::Services::OpenDaylightOvs: /usr/share/openstack-tripleo-heat-templates/puppet/services/opendaylight-ovs.yaml
  #OS::TripleO::Services::NeutronL3Agent: OS::Heat::None
  #OS::TripleO::Docker::NeutronMl2PluginBase: /usr/share/openstack-tripleo-heat-templates/puppet/services/neutron-plugin-ml2-odl.yaml 


  # Network isolation configuration
  # Service section
  # If some service should be disable, use the following example
  # OS::TripleO::Network::Management: OS::Heat::None

  #OS::TripleO::Network::External: /usr/share/openstack-tripleo-heat-templates/network/external.yaml
  #OS::TripleO::Network::InternalApi: /usr/share/openstack-tripleo-heat-templates/network/internal_api.yaml
  #OS::TripleO::Network::Tenant: /usr/share/openstack-tripleo-heat-templates/network/tenant.yaml
  #OS::TripleO::Network::Management: OS::Heat::None
  #OS::TripleO::Network::StorageMgmt: OS::Heat::None
  #OS::TripleO::Network::Storage: OS::Heat::None

  # Port assignments for the VIP addresses
  #OS::TripleO::Network::Ports::ExternalVipPort: /usr/share/openstack-tripleo-heat-templates/network/ports/external.yaml
  #OS::TripleO::Network::Ports::InternalApiVipPort: /usr/share/openstack-tripleo-heat-templates/network/ports/internal_api.yaml
  #OS::TripleO::Network::Ports::RedisVipPort: /usr/share/openstack-tripleo-heat-templates/network/ports/vip.yaml
  #OS::TripleO::Network::Ports::StorageVipPort: /usr/share/openstack-tripleo-heat-templates/network/ports/noop.yaml
  #OS::TripleO::Network::Ports::StorageMgmtVipPort: /usr/share/openstack-tripleo-heat-templates/network/ports/noop.yaml

  # Port assignments for the controller role
  #OS::TripleO::Controller::Ports::ExternalPort: /usr/share/openstack-tripleo-heat-templates/network/ports/external.yaml
  #OS::TripleO::Controller::Ports::InternalApiPort: /usr/share/openstack-tripleo-heat-templates/network/ports/internal_api.yaml
  #OS::TripleO::Controller::Ports::TenantPort: /usr/share/openstack-tripleo-heat-templates/network/ports/tenant.yaml
  #OS::TripleO::Controller::Ports::ManagementPort: /usr/share/openstack-tripleo-heat-templates/network/ports/noop.yaml
  #OS::TripleO::Controller::Ports::StoragePort: /usr/share/openstack-tripleo-heat-templates/network/ports/noop.yaml
  #OS::TripleO::Controller::Ports::StorageMgmtPort: /usr/share/openstack-tripleo-heat-templates/network/ports/noop.yaml

  # Port assignments for the ComputeOvsDpdk role
  #OS::TripleO::ComputeOvsDpdk::Ports::ExternalPort: /usr/share/openstack-tripleo-heat-templates/network/ports/external.yaml
  #OS::TripleO::ComputeOvsDpdk::Ports::InternalApiPort: /usr/share/openstack-tripleo-heat-templates/network/ports/internal_api.yaml
  #OS::TripleO::ComputeOvsDpdk::Ports::TenantPort: /usr/share/openstack-tripleo-heat-templates/network/ports/tenant.yaml
  #OS::TripleO::ComputeOvsDpdk::Ports::ManagementPort: /usr/share/openstack-tripleo-heat-templates/network/ports/noop.yaml
  #OS::TripleO::ComputeOvsDpdk::Ports::StoragePort: /usr/share/openstack-tripleo-heat-templates/network/ports/noop.yaml
  #OS::TripleO::ComputeOvsDpdk::Ports::StorageMgmtPort: /usr/share/openstack-tripleo-heat-templates/network/ports/noop.yaml

  # Port assignments for the ComputeSriov role
  #OS::TripleO::ComputeSriov::Ports::ExternalPort: /usr/share/openstack-tripleo-heat-templates/network/ports/external.yaml
  #OS::TripleO::ComputeSriov::Ports::InternalApiPort: /usr/share/openstack-tripleo-heat-templates/network/ports/internal_api.yaml
  #OS::TripleO::ComputeSriov::Ports::TenantPort: /usr/share/openstack-tripleo-heat-templates/network/ports/tenant.yaml
  #OS::TripleO::ComputeSriov::Ports::ManagementPort: /usr/share/openstack-tripleo-heat-templates/network/ports/noop.yaml
  #OS::TripleO::ComputeSriov::Ports::StoragePort: /usr/share/openstack-tripleo-heat-templates/network/ports/noop.yaml
  #OS::TripleO::ComputeSriov::Ports::StorageMgmtPort: /usr/share/openstack-tripleo-heat-templates/network/ports/noop.yaml

  # Port assignments for the ComputeHybrid role
  #OS::TripleO::ComputeHybrid::Ports::ExternalPort: /usr/share/openstack-tripleo-heat-templates/network/ports/external.yaml
  #OS::TripleO::ComputeHybrid::Ports::InternalApiPort: /usr/share/openstack-tripleo-heat-templates/network/ports/internal_api.yaml
  #OS::TripleO::ComputeHybrid::Ports::TenantPort: /usr/share/openstack-tripleo-heat-templates/network/ports/tenant.yaml
  #OS::TripleO::ComputeHybrid::Ports::ManagementPort: /usr/share/openstack-tripleo-heat-templates/network/ports/noop.yaml
  #OS::TripleO::ComputeHybrid::Ports::StoragePort: /usr/share/openstack-tripleo-heat-templates/network/ports/noop.yaml
  #OS::TripleO::ComputeHybrid::Ports::StorageMgmtPort: /usr/share/openstack-tripleo-heat-templates/network/ports/noop.yaml


  # Port assignments for service virtual IP addresses for the controller role
  #OS::TripleO::Controller::Ports::RedisVipPort: /usr/share/openstack-tripleo-heat-templates/network/ports/vip.yaml

parameter_defaults:
  # Customize all these values to match the local environment
  InternalApiNetCidr: 10.1.1.0/24
  TenantNetCidr: 10.1.4.0/24
  StorageNetCidr: 10.1.2.0/24
  StorageMgmtNetCidr: 10.1.3.0/24 
  ExternalNetCidr: 10.19.108.0/24
  ControlPlaneSubnetCidr: '24'
  InternalApiAllocationPools: [{'start': '10.1.1.1', 'end': '10.1.1.250'}]
  TenantAllocationPools: [{'start': '10.1.4.1', 'end': '10.1.4.250'}]
  StorageAllocationPools: [{'start': '10.1.2.1', 'end': '10.1.2.253'}]
  StorageMgmtAllocationPools: [{'start': '10.1.3.1', 'end': '10.1.3.253'}] 
  ExternalAllocationPools: [{'start': '10.19.108.23', 'end': '10.19.108.50'}]
  #ExternalIpSubnet: 10.19.108.0/24
  ExternalInterfaceDefaultRoute: 10.19.108.51
  ControlPlaneDefaultRoute: 192.168.88.88
  ControlPlaneIp: 192.168.88.88
  EC2MetadataIp: 192.168.88.88
  InternalApiNetworkVlanID: 1020
  TenantNetworkVlanID: 1060
  StorageNetworkVlanID: 1030
  StorageMgmtNetworkVlanID: 1040
  ExternalNetworkVlanID: 100
  ManagementNetworkVlanID: 200
  ExternalNetworkVip: 10.19.108.51
  NtpServer: 10.5.26.10
  DnsServers: ["8.8.8.8","8.8.4.4"]
  NeutronExternalNetworkBridge: "''"
  NeutronTunnelTypes: "vlan"
  NeutronNetworkType: 'vlan'
  NeutronBridgeMappings: 'datacentre:br-ex,dpdk:br-dpdk1,sriov1:br-isolated1'
  NeutronNetworkVLANRanges: 'datacentre:100:100,dpdk:2073:2073,sriov1:2073:2077'
  OvercloudControllerFlavor: controller
  #OvercloudComputeOvsDpdkFlavor: computeovsdpdk
  OvercloudComputeSriovFlavor: compute
  LinuxBondInterfaceOptions: "mode=4 lacp_rate=1 updelay=0 miimon=100"
  DpdkBondInterfaceOvsOptions: "bond_mode=balance-tcp lacp=active"
  ControllerCount: 1
  #ComputeOvsDpdkCount: 1
  ComputeSriovCount: 2
  #ComputeHybridCount: 1
  # Sets overcloud nodes custom names
  # ControllerHostnameFormat: 'controller-%index%'
  # ComputeOvsDpdkHostnameFormat: 'computeovsdpdk-%index%'
  # ComputeSriovHostnameFormat: 'computesriov-%index%'
  # ComputeHybridHostnameFormat: 'computehybrid-%index%'

  #ControllerHostnameFormat: 'controller'
  #ComputeOvsDpdkHostnameFormat: 'computeovsdpdk'
  #ComputeSriovHostnameFormat: 'computesriov'
  #ComputeHybridHostnameFormat: 'computehybrid'


  NovaSchedulerAvailableFilters: ["nova.scheduler.filters.all_filters","nova.scheduler.filters.pci_passthrough_filter.PciPassthroughFilter"]
  NovaSchedulerDefaultFilters: ['AvailabilityZoneFilter','RamFilter','ComputeFilter','ComputeCapabilitiesFilter','ImagePropertiesFilter','ServerGroupAntiAffinityFilter','ServerGroupAffinityFilter','PciPassthroughFilter','NUMATopologyFilter']

  #OpenDaylightProviderMappings: 'datacentre:br-ex,dpdk:br-dpdk1,sriov1:br-isolated1'
  #NeutronMechanismDrivers: ["sriovnicswitch","opendaylight_v2"]
  NeutronMechanismDrivers: ['openvswitch','sriovnicswitch']
  NeutronOVSFirewallDriver: openvswitch
  # Number of VFs that needs to be configured for a physical interface
  #NeutronSriovNumVFs: "ens6f0:5,ens6f1:5"
  NeutronSriovNumVFs: "ens6f0:5" 
  NeutronVhostuserSocketDir: "/var/run/openvswitch"
  NovaPCIPassthrough:
    - devname: "ens6f0"
      physical_network: "sriov1"
    #- devname: "ens6f1"
    #  physical_network: "sriov2"
  NeutronPhysicalDevMappings: "sriov1:ens6f0"
  #OvsEnableDpdk: true
  #NeutronEnableForceMetadata: true
  #NeutronPluginExtensions: 'port_security'
  OvsDpdkCoreList: "14,15,38,39"
  #NeutronServicePlugins: 'odl-router_v2,trunk'
  #OpenDaylightLogMechanism: 'console'
  #OpenDaylightUsername: admin
  #OpenDaylightPassword: admin
  #OpenDaylightSNATMechanism: 'controller'
  NeutronDatapathType: "netdev"
  TunedProfileName: "cpu-partitioning"
  IsolCpusList: "12-23,36-47'"
  NovaReservedHostMemory: 4096
  KernelArgs: "iommu=pt intel_iommu=on default_hugepagesz=1GB hugepagesz=1G hugepages=64 isolcpus=12-23,36-47"              
  OvsDpdkSocketMemory: "1024,1024"     
  OvsDpdkMemoryChannels: "4"
  NeutronDpdkDriverType: "vfio-pci" 
  OvsPmdCoreList: "12,13,36,37"         
  NovaVcpuPinSet: ['16-23,40-47']
  SshServerOptions:
    UseDns: 'no'
